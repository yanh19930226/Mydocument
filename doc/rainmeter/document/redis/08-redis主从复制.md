# redis主从复制

 **是什么** 

主机数据更新后根据配置和策略，自动同步到备机的master/slaver机制，Master以写为主，Slave以读为主

 **能干嘛** 

- 读写分离
- 容灾恢复

 **怎么玩** 

- 命令
- 配置文件

 **复制原理** 

    slave启动成功连接到master后会发送一个sync命令

    Master接到命令启动后台的存盘进程，同时收集所有接收到的用于修改数据集命令，
    在后台进程执行完毕之后，master将传送整个数据文件到slave,以完成一次完全同步

    全量复制：而slave服务在接收到数据库文件数据后，将其存盘并加载到内存中。

    增量复制：Master继续将新的所有收集到的修改命令依次传给slave,完成同步   

    但是只要是重新连接master,一次完全同步（全量复制)将被自动执行

 **哨兵模式(sentinel)** 

反客为主的自动版，能够后台监控主机是否故障，如果故障了根据投票数自动将从库转换为主库       